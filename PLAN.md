# План разработки конвейера для анализа ТНО

## 1. Обзор

Этот документ описывает план разработки конвейера для анализа ТНО (Транснептуновых объектов). Основная цель проекта — проанализировать орбиты ТНО, чтобы сделать вывод о существовании и свойствах гипотетической девятой планеты (Планеты 9) во внешней Солнечной системе.

Конвейер будет построен на основе трех основных научных модулей: N-body моделирования, коррекции наблюдательных смещений и причинно-следственного вывода.

## 2. Структура проекта

```
/
|-- data/
|   |-- raw/
|   |-- processed/
|-- src/
|   |-- __init__.py
|   |-- data_ingestion/
|   |   |-- __init__.py
|   |   |-- fetch_data.py
|   |-- simulation/
|   |   |-- __init__.py
|   |   |-- n_body_simulator.py
|   |-- analysis/
|   |   |-- __init__.py
|   |   |-- bias_correction.py
|   |   |-- causal_inference.py
|   |-- visualization/
|   |   |-- __init__.py
|   |   |-- plot_results.py
|   |-- main.py
|-- notebooks/
|   |-- exploratory_analysis.ipynb
|-- tests/
|   |-- test_simulation.py
|   |-- test_analysis.py
|-- config/
|   |-- pipeline_config.yaml
|-- results/
|   |-- figures/
|   |-- tables/
|-- .gitignore
|-- README.md
|-- PLAN.md
```

## 3. Основные модули

### 3.1. N-body моделирование
- **Цель:** Точно смоделировать гравитационную динамику внешней Солнечной системы, включая Солнце, известные планеты и гипотетическую Планету 9.
- **Задачи:**
    - Интегрировать надежную библиотеку для N-body моделирования (например, REBOUND).
    - Разработать функционал для генерации синтетических популяций ТНО при различных сценариях Планеты 9 (например, с разной массой, орбитой).

### 3.2. Коррекция смещений
- **Цель:** Учесть значительные эффекты отбора и смещения, присутствующие в существующих наборах данных наблюдений ТНО.
- **Задачи:**
    - Реализовать модели основных наблюдательных смещений (например, история наведения телескопов, эффективность обнаружения).
    - Разработать модуль для применения этих поправок как к наблюдаемым, так и к синтетическим данным ТНО для обеспечения справедливого сравнения.

### 3.3. Причинно-следственный вывод
- **Цель:** Статистически оценить доказательства в пользу Планеты 9 путем сравнения наблюдаемых данных об орбитах ТНО с результатами моделирования.
- **Задачи:**
    - Реализовать статистическую основу для количественной оценки вероятности гипотезы о Планете 9.
    - Использовать методы причинно-следственного вывода, чтобы отличить корреляцию от причинности в кластеризации орбит ТНО.

## 4. Этапы разработки

### Этап 1: Модуль N-body моделирования
- **Цель:** Создать функциональный симулятор, способный генерировать реалистичные синтетические данные ТНО.
- **Сроки:** TBD
- **Ключевые задачи:**
    1. Выбрать и проверить библиотеку для N-body моделирования.
    2. Реализовать начальные условия для внешней Солнечной системы.
    3. Разработать код для генерации синтетических ТНО.

### Этап 2: Модуль коррекции смещений
- **Цель:** Разработать и проверить алгоритмы коррекции смещений.
- **Сроки:** TBD
- **Ключевые задачи:**
    1. Охарактеризовать смещения от основных обзоров ТНО.
    2. Реализовать модель коррекции.
    3. Протестировать модель на синтетических данных с известными смещениями.

### Этап 3: Причинно-следственный вывод и анализ
- **Цель:** Создать статистический движок для сравнения данных и получения выводов.
- **Сроки:** TBD
- **Ключевые задачи:**
    1. Выбрать и реализовать соответствующие статистические тесты.
    2. Разработать основу для сравнения наблюдаемых и синтетических данных.

### Этап 4: Интеграция и проверка конвейера
- **Цель:** Объединить все модули в единый, сквозной конвейер.
- **Сроки:** TBD
- **Ключевые задачи:**
    1. Создать главный скрипт или рабочий процесс для управления потоком данных между модулями.
    2. Провести сквозную проверку с использованием синтетических данных.
    3. Запустить полный конвейер на последнем наборе реальных данных ТНО.

## 5. Предлагаемый стек технологий
- **Основной язык:** Python
- **Основные библиотеки:**
    - **Моделирование:** `rebound`
    - **Обработка данных:** `pandas`, `numpy`, `astropy`
    - **Статистика:** `scipy`, `statsmodels`
    - **Рабочий процесс:** (Будет определено позже - например, кастомные скрипты, Snakemake)
